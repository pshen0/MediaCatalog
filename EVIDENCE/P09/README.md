# P09 Evidence Directory

Этот каталог содержит артефакты безопасности, сгенерированные в рамках практики P09 (SBOM & SCA).

## Структура файлов

- **`sbom.json`** — Software Bill of Materials в формате CycloneDX JSON
  - Содержит полный список всех зависимостей проекта (прямых и транзитивных)
  - Генерируется автоматически при каждом запуске workflow `ci-sbom-sca.yml`
  - Используется как вход для SCA сканирования

- **`sca_report.json`** — Полный отчёт о сканировании уязвимостей (Grype JSON)
  - Содержит детальную информацию о всех найденных уязвимостях
  - Включает CVE ID, severity, описание, затронутые пакеты и версии
  - Используется для детального анализа и создания waivers

- **`sca_summary.md`** — Агрегированная сводка по уязвимостям
  - Распределение уязвимостей по severity (Critical, High, Medium, Low)
  - Список критических и высоких уязвимостей с кратким описанием
  - Общая статистика и затронутые пакеты
  - Рекомендации по дальнейшим действиям

## Использование артефактов

### Для анализа уязвимостей

1. Откройте `sca_summary.md` для быстрого обзора
2. Изучите `sca_report.json` для детальной информации
3. Проверьте `policy/waivers.yml` на наличие существующих исключений

### Для создания waivers

Если уязвимость не может быть исправлена немедленно:

1. Создайте Issue в репозитории с описанием проблемы
2. Добавьте запись в `policy/waivers.yml` с обоснованием
3. Укажите срок пересмотра (обычно 3-6 месяцев)
4. Создайте PR с описанием waiver

### Для отслеживания в DS-разделе итогового отчёта

Артефакты из этого каталога используются для:

- Демонстрации процесса управления зависимостями
- Отслеживания истории уязвимостей и их исправлений
- Подтверждения соответствия политике безопасности
- Анализа трендов уязвимостей в проекте

## Связь с коммитами и релизами

Каждый набор артефактов привязан к конкретному коммиту через:

- Commit SHA в `sca_summary.md`
- Workflow Run ID в `sca_summary.md`
- Ссылка на GitHub Actions job в `sca_summary.md`

Артефакты также доступны через GitHub Actions artifacts (название: `P09_EVIDENCE`).

## Автоматизация

Артефакты генерируются автоматически при:

- Push в репозиторий (при изменении Python файлов или requirements)
- Ручном запуске workflow (`workflow_dispatch`)
- Изменении самого workflow или `policy/waivers.yml`

## Инструменты

- **Syft v1.5.0** — генерация SBOM (фиксированная версия для воспроизводимости)
- **Grype v0.78.0** — сканирование уязвимостей (фиксированная версия для воспроизводимости)

## См. также

- `.github/workflows/ci-sbom-sca.yml` — workflow для генерации артефактов
- `policy/waivers.yml` — файл с исключениями для уязвимостей
- `docs/adr/ADR-003-dependency-security.md` — архитектурное решение по безопасности зависимостей
